{
    "prometheus": {
        "scrapeInterval": "15s",
        "evaluationInterval": "15s",
        "exporters": {
            "nodeExporter": true,
            "blackboxExporter": true,
            "mysqlExporter": true,
            "nginxExporter": true
        },
        "monitoring": {
            "aggregation": {
                "rules": {
                    "cpu_usage_high": {
                        "expr": "avg(rate(node_cpu_seconds_total{mode='idle'}[5m])) < 0.2",
                        "for": "5m",
                        "severity": "warning"
                    },
                    "memory_usage_high": {
                        "expr": "node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes * 100 < 10",
                        "for": "5m",
                        "severity": "critical"
                    },
                    "disk_space_low": {
                        "expr": "node_filesystem_avail_bytes{mountpoint='/'} / node_filesystem_size_bytes{mountpoint='/'} * 100 < 15",
                        "for": "10m",
                        "severity": "warning"
                    },
                    "nginx_high_error_rate": {
                        "expr": "rate(nginx_http_requests_total{status=~'5..'}[5m]) / rate(nginx_http_requests_total[5m]) * 100 > 5",
                        "for": "5m",
                        "severity": "critical"
                    },
                    "mysql_slow_queries": {
                        "expr": "rate(mysql_global_status_slow_queries[5m]) > 10",
                        "for": "5m",
                        "severity": "warning"
                    }
                }
            }
        }
    },
    "grafana": {
        "defaultDashboards": true,
        "alerting": {
            "enabled": true,
            "rules": ["system", "mysql", "nginx"],
            "channels": {
                "email": {
                    "enabled": true,
                    "smtp": {
                        "host": "smtp.example.com",
                        "port": 587,
                        "secure": true
                    }
                },
                "slack": {
                    "enabled": true,
                    "webhook": true
                },
                "telegram": {
                    "enabled": true,
                    "bot": true
                },
                "webhook": {
                    "enabled": true,
                    "endpoints": ["custom-endpoint"]
                }
            },
            "policies": {
                "critical": {
                    "channels": ["email", "slack", "telegram"],
                    "repeat": "30m",
                    "groupBy": ["alertname", "instance"]
                },
                "warning": {
                    "channels": ["slack"],
                    "repeat": "2h",
                    "groupBy": ["alertname"]
                },
                "info": {
                    "channels": ["slack"],
                    "repeat": "6h"
                }
            }
        },
        "dashboards": {
            "system": {
                "title": "System Overview",
                "refresh": "1m",
                "panels": [
                    "cpu_usage",
                    "memory_usage",
                    "disk_io",
                    "network_traffic"
                ]
            },
            "nginx": {
                "title": "Nginx Metrics",
                "refresh": "30s",
                "panels": [
                    "requests_per_second",
                    "status_codes",
                    "response_time",
                    "active_connections"
                ]
            },
            "mysql": {
                "title": "MySQL Performance",
                "refresh": "1m",
                "panels": [
                    "queries_per_second",
                    "slow_queries",
                    "connections",
                    "buffer_pool_usage"
                ]
            },
            "security": {
                "title": "Security Overview",
                "refresh": "5m",
                "panels": [
                    "failed_logins",
                    "ssl_expiry",
                    "firewall_events",
                    "auth_attempts"
                ]
            }
        }
    },
    "alertmanager": {
        "config": {
            "global": {
                "resolve_timeout": "5m",
                "smtp_smarthost": "smtp.example.com:587",
                "smtp_from": "alertmanager@example.com"
            },
            "route": {
                "group_by": ["alertname", "cluster", "service"],
                "group_wait": "30s",
                "group_interval": "5m",
                "repeat_interval": "4h",
                "receiver": "default-receiver",
                "routes": [
                    {
                        "match": {
                            "severity": "critical"
                        },
                        "receiver": "critical-receiver",
                        "repeat_interval": "30m"
                    },
                    {
                        "match": {
                            "severity": "warning"
                        },
                        "receiver": "warning-receiver",
                        "repeat_interval": "2h"
                    }
                ]
            },
            "inhibit_rules": [
                {
                    "source_match": {
                        "severity": "critical"
                    },
                    "target_match": {
                        "severity": "warning"
                    },
                    "equal": ["alertname", "cluster", "service"]
                }
            ]
        }
    }
} 